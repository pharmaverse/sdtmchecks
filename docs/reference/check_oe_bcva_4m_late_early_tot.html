<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Check if 4m BCVA test stops too late, too early and has correct total — check_oe_bcva_4m_late_early_tot • sdtmchecks</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Check if 4m BCVA test stops too late, too early and has correct total — check_oe_bcva_4m_late_early_tot" />
<meta property="og:description" content="This ophthalmology check is for BCVA 4m test. It checks three conditions: &amp;lt;1&amp;gt; BCVA test stops too late,
meaning that lines were read after number of correct letters is &amp;lt;= 3. &amp;lt;2&amp;gt; BCVA test stops too early, meaning that
further lines were not read when all numbers of correct letters is &amp;gt; 3. &amp;lt;3&amp;gt; BCVA total score is not correct, meaning
that the sum of the number of correct at 4 meters doesn't match with what has been recorded in eCRF
(BCVA Scores eCRF Page - A. Total number correct at 4m). Please note that this check only works with USUBJID, VISIT,
VISITNUM, OELOC, OELAT combination has unique dates (OEDTC). If your datasets are having situations like 1) unscheduled
visits happening on different dates or 2) BCVA TOTAL happens on a different date from BCVA row tests, such combinations
will be removed from check.
Please note that this check excludes forms BCVA Low Vision Test (BCV5), BCVA Scores (BCV7),
BCVA Low Luminance Scores (BCVLL5), BCVA Combined Assessments (BCVAC), BCVA Low Luminance Combined Assessments (BCVACLL)
before running check as these forms do not include Row numbers." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sdtmchecks</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.5.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/sdtmchecks.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/write_a_check.html">Writing a New Check</a>
    </li>
    <li>
      <a href="../articles/search_checks.html">Search Data Check Functions</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Releases</li>
    <li class="dropdown-header">sdtmchecks 0.1.5</li>
    <li>
      <a href="https://pharmaverse.github.io/sdtmchecks/news/index.html#sdtmchecks-015-hunter-pi"></a>
    </li>
    <li class="dropdown-header">sdtmchecks 0.1.2-0.1.4</li>
    <li>
      <a href="https://pharmaverse.github.io/sdtmchecks/news/index.html#sdtmchecks-014-very-cool-nickname"></a>
    </li>
    <li class="dropdown-header">sdtmchecks 0.1.1</li>
    <li>
      <a href="https://pharmaverse.github.io/sdtmchecks/news/index.html#sdtmchecks-011-open-up"></a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/pharmaverse/sdtmchecks">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Check if 4m BCVA test stops too late, too early and has correct total</h1>
    <small class="dont-index">Source: <a href='https://github.com/pharmaverse/sdtmchecks/blob/master/R/check_oe_bcva_4m_late_early_tot.R'><code>R/check_oe_bcva_4m_late_early_tot.R</code></a></small>
    <div class="hidden name"><code>check_oe_bcva_4m_late_early_tot.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This ophthalmology check is for BCVA 4m test. It checks three conditions: &lt;1&gt; BCVA test stops too late,
meaning that lines were read after number of correct letters is &lt;= 3. &lt;2&gt; BCVA test stops too early, meaning that
further lines were not read when all numbers of correct letters is &gt; 3. &lt;3&gt; BCVA total score is not correct, meaning
that the sum of the number of correct at 4 meters doesn't match with what has been recorded in eCRF
(BCVA Scores eCRF Page - A. Total number correct at 4m). Please note that this check only works with USUBJID, VISIT,
VISITNUM, OELOC, OELAT combination has unique dates (OEDTC). If your datasets are having situations like 1) unscheduled
visits happening on different dates or 2) BCVA TOTAL happens on a different date from BCVA row tests, such combinations
will be removed from check.
Please note that this check excludes forms BCVA Low Vision Test (BCV5), BCVA Scores (BCV7),
BCVA Low Luminance Scores (BCVLL5), BCVA Combined Assessments (BCVAC), BCVA Low Luminance Combined Assessments (BCVACLL)
before running check as these forms do not include Row numbers.</p>
    </div>

    <pre class="usage"><span class='fu'>check_oe_bcva_4m_late_early_tot</span><span class='op'>(</span><span class='va'>OE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>OE</th>
      <td><p>Ophtho Dataset with variables USUBJID, OESPID, OECAT, OESCAT, OETSTDTL, OESTRESN, OESTAT, OELOC, OELAT,
OERESCAT, VISIT, VISITNUM, OEDTC, OEDY</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>boolean value if check failed or passed with 'msg' attribute if the
test failed</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Rosemary Li (HackR 2021 Team Eye)</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>OE_too_late</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
  USUBJID <span class='op'>=</span> <span class='st'>"1"</span>,
  OESPID <span class='op'>=</span> <span class='st'>"FORMNAME-R:2/L:2XXXX"</span>,
  OECAT <span class='op'>=</span> <span class='st'>"BEST CORRECTED VISUAL ACUITY"</span>,
  OETSTDTL <span class='op'>=</span> <span class='st'>"TESTING DISTANCE: 4M"</span>,
  OESCAT <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='st'>""</span>, <span class='fl'>6</span><span class='op'>)</span>, <span class='st'>"TOTAL"</span><span class='op'>)</span>,
  OESTAT <span class='op'>=</span> <span class='st'>""</span>,
  OERESCAT <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ROW 1 - SNELLEN 20/200"</span>, 
               <span class='st'>"ROW 2 - SNELLEN 20/160"</span>, 
               <span class='st'>"ROW 4 - SNELLEN 20/100"</span>,
               <span class='st'>"ROW 3 - SNELLEN 20/125"</span>, 
               <span class='st'>"ROW 5 - SNELLEN 20/80"</span>, 
               <span class='st'>"ROW 6 - SNELLEN 20/63"</span>, 
               <span class='st'>""</span><span class='op'>)</span>,
  VISIT <span class='op'>=</span> <span class='st'>"WEEK 1"</span>,
  VISITNUM <span class='op'>=</span> <span class='fl'>5</span>,
  OEDTC <span class='op'>=</span> <span class='st'>"2020-06-01"</span>,
  OEDY <span class='op'>=</span> <span class='fl'>8</span>,
  OELOC <span class='op'>=</span> <span class='st'>"EYE"</span>,
  OELAT <span class='op'>=</span> <span class='st'>"LEFT"</span>,
  OESTRESN <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span>, <span class='fl'>5</span>, <span class='fl'>5</span>, <span class='fl'>4</span>, <span class='fl'>3</span>, <span class='fl'>2</span>, <span class='fl'>24</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='fu'>check_oe_bcva_4m_late_early_tot</span><span class='op'>(</span><span class='va'>OE_too_late</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] FALSE
#&gt; attr(,"msg")
#&gt; [1] "1 BCVA 4m test record(s) failed with 1) test stops too late 2) test stops too early 3) total incorrect. "
#&gt; attr(,"data")
#&gt;   USUBJID             OETSTDTL  VISIT      OEDTC OELAT OESTRESN TOTAL
#&gt; 1       1 TESTING DISTANCE: 4M WEEK 1 2020-06-01  LEFT        2    NA
#&gt;                          issue
#&gt; 1 BCVA 4m check stops too late</div><div class='input'>
<span class='va'>OE_too_early</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
  USUBJID <span class='op'>=</span> <span class='st'>"1"</span>,
  OESPID <span class='op'>=</span> <span class='st'>"FORMNAME-R:2/L:2XXXX"</span>,
  OECAT <span class='op'>=</span> <span class='st'>"BEST CORRECTED VISUAL ACUITY"</span>,
  OETSTDTL <span class='op'>=</span> <span class='st'>"TESTING DISTANCE: 4M"</span>,
  OESCAT <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='st'>""</span>, <span class='fl'>6</span><span class='op'>)</span>, <span class='st'>"TOTAL"</span><span class='op'>)</span>,
  OESTAT <span class='op'>=</span> <span class='st'>""</span>,
  OERESCAT <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ROW 1 - SNELLEN 20/200"</span>, 
               <span class='st'>"ROW 2 - SNELLEN 20/160"</span>, 
               <span class='st'>"ROW 4 - SNELLEN 20/100"</span>,
               <span class='st'>"ROW 3 - SNELLEN 20/125"</span>, 
               <span class='st'>"ROW 5 - SNELLEN 20/80"</span>, 
               <span class='st'>"ROW 6 - SNELLEN 20/63"</span>, 
               <span class='st'>""</span><span class='op'>)</span>,
  VISIT <span class='op'>=</span> <span class='st'>"WEEK 1"</span>,
  VISITNUM <span class='op'>=</span> <span class='fl'>5</span>,
  OEDTC <span class='op'>=</span> <span class='st'>"2020-06-01"</span>,
  OEDY <span class='op'>=</span> <span class='fl'>8</span>,
  OELOC <span class='op'>=</span> <span class='st'>"EYE"</span>,
  OELAT <span class='op'>=</span> <span class='st'>"LEFT"</span>,
  OESTRESN <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span>, <span class='fl'>5</span>, <span class='fl'>5</span>, <span class='fl'>4</span>, <span class='fl'>4</span>, <span class='fl'>5</span>, <span class='fl'>28</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='fu'>check_oe_bcva_4m_late_early_tot</span><span class='op'>(</span><span class='va'>OE_too_early</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] FALSE
#&gt; attr(,"msg")
#&gt; [1] "1 BCVA 4m test record(s) failed with 1) test stops too late 2) test stops too early 3) total incorrect. "
#&gt; attr(,"data")
#&gt; <span style='color: #949494;'># A tibble: 1 × 8</span><span>
#&gt;   USUBJID OETSTDTL             VISIT  OEDTC      OELAT OESTRESN TOTAL issue     
#&gt;   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>   </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>                </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>  </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>      </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #949494;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;lgl&gt;</span><span> </span><span style='color: #949494;font-style: italic;'>&lt;chr&gt;</span><span>     
#&gt; </span><span style='color: #BCBCBC;'>1</span><span> 1       TESTING DISTANCE: 4M WEEK 1 2020-06-01 LEFT         5 </span><span style='color: #BB0000;'>NA</span><span>    BCVA 4m c…</div><div class='input'>
<span class='va'>OE_total_incorrect</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
  USUBJID <span class='op'>=</span> <span class='st'>"1"</span>,
  OESPID <span class='op'>=</span> <span class='st'>"FORMNAME-R:2/L:2XXXX"</span>,
  OECAT <span class='op'>=</span> <span class='st'>"BEST CORRECTED VISUAL ACUITY"</span>,
  OETSTDTL <span class='op'>=</span> <span class='st'>"TESTING DISTANCE: 4M"</span>,
  OESCAT <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='st'>""</span>, <span class='fl'>6</span><span class='op'>)</span>, <span class='st'>"TOTAL"</span><span class='op'>)</span>,
  OESTAT <span class='op'>=</span> <span class='st'>""</span>,
  OERESCAT <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ROW 1 - SNELLEN 20/200"</span>, 
               <span class='st'>"ROW 2 - SNELLEN 20/160"</span>, 
               <span class='st'>"ROW 4 - SNELLEN 20/100"</span>,
               <span class='st'>"ROW 3 - SNELLEN 20/125"</span>, 
               <span class='st'>"ROW 5 - SNELLEN 20/80"</span>, 
               <span class='st'>"ROW 6 - SNELLEN 20/63"</span>, 
               <span class='st'>""</span><span class='op'>)</span>,
  VISIT <span class='op'>=</span> <span class='st'>"WEEK 1"</span>,
  VISITNUM <span class='op'>=</span> <span class='fl'>5</span>,
  OEDTC <span class='op'>=</span> <span class='st'>"2020-06-01"</span>,
  OEDY <span class='op'>=</span> <span class='fl'>8</span>,
  OELOC <span class='op'>=</span> <span class='st'>"EYE"</span>,
  OELAT <span class='op'>=</span> <span class='st'>"LEFT"</span>,
  OESTRESN <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span>, <span class='fl'>5</span>, <span class='fl'>5</span>, <span class='fl'>4</span>, <span class='fl'>4</span>, <span class='fl'>2</span>, <span class='fl'>28</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='fu'>check_oe_bcva_4m_late_early_tot</span><span class='op'>(</span><span class='va'>OE_total_incorrect</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] FALSE
#&gt; attr(,"msg")
#&gt; [1] "1 BCVA 4m test record(s) failed with 1) test stops too late 2) test stops too early 3) total incorrect. "
#&gt; attr(,"data")
#&gt;   USUBJID             OETSTDTL  VISIT      OEDTC OELAT OESTRESN TOTAL
#&gt; 1       1 TESTING DISTANCE: 4M WEEK 1 2020-06-01  LEFT       28    25
#&gt;                     issue
#&gt; 1 BCVA 4m score incorrect</div><div class='input'>



</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Will Harris.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


